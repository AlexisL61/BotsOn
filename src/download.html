<!DOCTYPE html>
<html style="overflow:hidden">

<head>
	<title>Bots On - Installation d'extension</title>
	
	<link rel="stylesheet" href="./webpage-files/main-style.css">

</head>

<body id="body">
	<section id="loading-section">
		<div class="all-screen-size" style="overflow:hidden;padding:5px;">
			<img src="files/images/x.png" style="width:20px;margin-left:370px;position:absolute;" onclick="ipcRenderer.send('closeDownload')">
			<div style="display:flex;position:absolute">
			<img src="https://img.icons8.com/ultraviolet/50/000000/puzzle.png" style="width:40px;height:40px;margin-top:10px;margin-left:20px">
			<div class=" download-extension-title">
				<p class="white" id="download-text" style="transition:0.5s;opacity:1;position:absolute;text-align:center;width:300px">
					Téléchargement de l'extension
				</p>
				<p class="white" id="extraction-text" style="transition:0.5s;opacity:0;margin-top:80px;position:absolute;text-align:center;width:300px">
					Extraction de l'extension
				</p>
				<p class="white" id="finalisation-text" style="transition:0.5s;opacity:0;margin-top:80px;position:absolute;text-align:center;width:300px">
					Finalisation
				</p>
				<p class="white" id="end-text" style="transition:0.5s;opacity:0;margin-top:80px;position:absolute;text-align:center;width:300px">
					Installation terminée
				</p>
				<p class="white" id="error-text" style="transition:0.5s;opacity:0;margin-top:80px;position:absolute;text-align:center;width:300px">
					Une erreur est survenue
				</p>
			</div>
			<div style="transition:0.5s;height:5px;width:350px;margin-top:70px;margin-left:20px;background-color: #111111;position:absolute">

			</div>
			<div id="jauge" style="transition:0.5s;height:5px;width:0px;margin-top:70px;margin-left:20px;background-color: rgb(0, 153, 255);position:absolute">

			</div>
			<div style="width:20px;height:20px;margin-top:63px;border-radius: 50%;margin-left:15px;background-color: rgb(0, 153, 255);position:absolute">

			</div>
			<div id="bulle2" style="transition:0.2s 0.5s;width:20px;height:20px;margin-top:63px;border-radius: 50%;margin-left:131px;background-color: #111111;;position:absolute">

			</div>
			<div id="bulle3" style="transition:0.2s 0.5s;width:20px;height:20px;margin-top:63px;border-radius: 50%;margin-left:247px;background-color: #111111;;position:absolute">

			</div>
			<div id="bulle4" style="transition:0.2s 0.5s;width:20px;height:20px;margin-top:63px;border-radius: 50%;margin-left:355px;background-color: #111111;;position:absolute">

			</div>
			</div>
		</div>
	</section>
	<script>
		var finish = false
		ipcRenderer.send("downloadExtensionFromURL","")
		ipcRenderer.on("downloadFinish",function(){
			if (finish!=true){
				document.getElementById("download-text").style.marginTop = "-20px"
				document.getElementById("download-text").style.opacity = "0"
				document.getElementById("extraction-text").style.marginTop = "20px"
				document.getElementById("extraction-text").style.opacity = "1"
				document.getElementById("jauge").style.width="116px"
				document.getElementById("bulle2").style.backgroundColor = "rgb(0, 153, 255)"
			}
		})
		ipcRenderer.on("unzipFinish",function(){
			document.getElementById("extraction-text").style.marginTop = "-20px"
			document.getElementById("extraction-text").style.opacity = "0"
			document.getElementById("finalisation-text").style.marginTop = "20px"
			document.getElementById("finalisation-text").style.opacity = "1"
			document.getElementById("jauge").style.width="232px"
			document.getElementById("bulle3").style.backgroundColor = "rgb(0, 153, 255)"
			//document.getElementById("downloading-section-title").innerHTML = "Installation de l'extension terminée.<br/>Vous pouvez fermer cette fenêtre"
		})
		ipcRenderer.on("finalisationFinish",function(){
			finish = true
			document.getElementById("finalisation-text").style.marginTop = "-20px"
			document.getElementById("finalisation-text").style.opacity = "0"
			document.getElementById("end-text").style.marginTop = "20px"
			document.getElementById("end-text").style.opacity = "1"
			document.getElementById("jauge").style.width="350px"
			document.getElementById("bulle4").style.backgroundColor = "rgb(0, 153, 255)"
		})
		ipcRenderer.on("error",function(e){
			document.getElementById("finalisation-text").style.marginTop = "-30px"
			document.getElementById("finalisation-text").style.opacity = "0"
			document.getElementById("end-text").style.marginTop = "-30px"
			document.getElementById("end-text").style.opacity = "0"
			document.getElementById("download-text").style.marginTop = "-30px"
			document.getElementById("download-text").style.opacity = "0"
			document.getElementById("extraction-text").style.marginTop = "-30px"
			document.getElementById("extraction-text").style.opacity = "0"
		})
	</script>
</body>

</html>